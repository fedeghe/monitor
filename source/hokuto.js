'use strict';
/*

HOKUTO

version 0.0.2 ~19.15KB
build #1251 on 19/2/2021
with Malta 4.1.28
*/
var hokuto=function(){function Unode(t,e){this.config=t,this.map=e,this.parent=t.target,this.tag=t.tag||"div",this.node=this.config.ns?document.createElementNS(t.ns,this.tag):document.createElement(this.tag),this.rendered=!1,this.toSolve=0,this.state="state"in t?t.state:{},this.data="data"in t?t.data:{},this.init="init"in t&&t.init,this.rootNode="rootNode"in t?t.rootNode:this,this.parentNode="parentNode"in t?t.parentNode:this,this.paramsFromChildren=[],this.root=this.map.rootNode,this.abort=this.map.abort,this.getNode=this.map.getNode,this.getNodes=this.map.getNodes,this.lateWid=this.map.lateWid,this.getElements=this.map.getElements,this.getElement=this.map.getElement,this.resolve=function(){},this.reset=function(){},this.setMethods(),this.prepareState(),this.initialize(),this.checkInit(),this.checkEnd()}function render(t,e,n){var o,r=+new Date,i=t.target,s=i.innerHTML,a=document.createDocumentFragment(),c=!0,u={abort:function(){return c=!1,i.innerHTML=s,"onAbort"in t&&typeof t.onAbort===TYPES.F&&t.onAbort.call(null,t),!1},add:function(t,e){u.elements[t]=e},getNode:function(t){return u.elements[t]||!1},getNodes:function(){return u.elements},lateWid:function(t){u.elements[t]=this},elements:{},endFunctions:[],getElement:getElement,getElements:getElements},l=new Unode(Object.assign({},t,{target:a}),u);return!n||n in __renders||(__renders[n]=l),!0===e&&(i.innerHTML=""),l.render().then(function(){for(c||returnrootNode,i.appendChild(a),o=+new Date,NS.LIB.timer.add(o-r);u.endFunctions.length;)u.endFunctions.pop()()})}function renderWithComponents(t){console.log("init",t)}function cleanup(t,e){render({target:t,children:[{html:e||""}]},!0)}function get(t){var e,n=document.createElement("div");return t.target=n,e=render(t),[n,e.value]}function preload(t){var e=document.createElement("script");document.getElementsByTagName("head")[0].appendChild(e),e.onload=function(){e.parentNode.removeChild(e)},e.src=t}function getElement(t){return t in __renders&&__renders[t]}function getElements(){return __renders}var TYPES={U:"undefined",F:"function"},_={},W=window,WD=W.document,NS={};!function(t){"use strict";function e(n,o,r){n=n.replace(/^\//,"");var i,s=n.split(/\.|\//),a=s.length;return typeof r===TYPES.U&&(r=t),typeof o===TYPES.U&&(o={}),typeof o===TYPES.F&&(o=o()),r[s[0]]||(r[s[0]]=1===a?o:{}),i=r[s[0]],a>1?e(s.slice(1).join("."),o,r[s[0]]):i}function n(t,e){t=t.replace(/^\//,"");var n=t.split(/\.|\//),o=0,r=n.length;if(e=typeof e!==TYPES.U?e:_context_,!t)return e;for(null;o<r;o+=1){if(typeof e[n[o]]===TYPES.U)return;e=e[n[o]]}return e}function o(t,e){var n,o=typeof e===TYPES.F?e():e;for(n in o)typeof t[n]===TYPES.U&&(t[n]=o[n])}t.makeNs=e,t.checkNs=n,t.extendNs=o}(NS),NS.makeNs("LIB",{}),function(){"use strict";function t(e){var n=this,o=!1;this.status=t.STATUSES.PENDING,this.value=null,this.cause=null,this.resolvers=this.resolvers||[],this.rejectors=this.rejectors||[],this.finalizers=this.finalizers||[],e=e||function(){};try{e(function(e){o||n.status!==t.STATUSES.PENDING||(o=!0,n.status=t.STATUSES.FULFILLED,n.value=e,t.roll(n.resolvers,"value",n),t.roll(n.finalizers,"value",n))},function(e){o||n.status!==t.STATUSES.PENDING||(o=!0,n.status=t.STATUSES.REJECTED,n.cause=e,t.roll(n.rejectors,"cause",n),t.roll(n.finalizers,"cause",n))})}catch(e){return t.reject(e.message)}return this}t.roll=function(t,e,n){t.forEach(function(t){t(n[e])},n)},t.prototype.resolve=function(e){return t.call(this,function(t,n){return t(e)})},t.prototype.reject=function(e){return t.call(this,function(t,n){return n(e)})},t.prototype.launch=function(e){return t.call(this,e)},t.prototype.then=function(e,n){switch(this.status){case t.STATUSES.REJECTED:t.roll(this.rejectors,"cause",this);break;case t.STATUSES.PENDING:this.resolvers.push(e),n&&this.rejectors.push(n);break;case t.STATUSES.FULFILLED:e(this.value)}return this},t.prototype.catch=function(e){switch(this.status){case t.STATUSES.PENDING:this.rejectors.push(e);break;case t.STATUSES.REJECTED:return e.call(this,this.cause)}return this},t.prototype.finally=function(e){return this.finalizers.push(e),this.status!==t.STATUSES.PENDING&&t.roll(this.finalizers,"value",this),this},t.STATUSES={PENDING:"PENDING",FULFILLED:"FULFILLED",REJECTED:"REJECTED"},t._isFunc=function(t){return"function"==typeof t},t._isIterable=function(e){return null!=e&&t._isFunc(e[Symbol.iterator])},t.one=function(e){return new t(e)},t.all=function(e){if(!t._isIterable(e))return t.reject("Balle.all acceps an Iterable Promise only");var n=[],o=e.length,r=0;return new t(function(t,i){e.forEach(function(e,s){"REJECTED"==e.status&&i(e.cause),e.then(function(e){r++,n[s]=e,r==o&&t(n)}).catch(i)})})},t.race=function(e){return t._isIterable(e)?new t(function(t,n){e.forEach(function(e){e.then(t).catch(n)})}):t.reject("Balle.race acceps an Iterable Promise only")},t.chain=function(e){if(!t._isIterable(e))return t.reject("Balle.chain acceps an Iterable Promise only");var n=e.length;return new t(function(t,o){!function r(i,s){return i===n?t(s):e[i](s).then(function(t){r(++i,t)}).catch(function(t){o(t)})}(0)})},t.reject=function(e){return new t(function(t,n){return n(e)})},t.resolve=function(e){return new t(function(n,o){e instanceof t?e.then(n).catch(o):n(e)})},"object"==typeof exports&&(module.exports=t),NS.LIB.Balle=t}(),function(){"use strict";var t=W.history,e=[],n=function(t,n,o){e.forEach(function(e){e(t,n,o)})};NS.makeNs("LIB.history",{push:function(e,o,r){t.pushState(o||{},r||"",e),n(e,o,r)},registerHandler:function(t){e.push(t)},replace:function(e,o,r){t.replaceState(o||{},r||"",e),n(e,o,r)},resetHandlers:function(){e=[]},state:function(){return t.state}})}(),function(){function t(t,e){n.unhandlers[t]=n.unhandlers[t]||[],n.unhandlers[t].push(e)}function e(t){n.unhandlers[t]&&n.unhandlers[t].forEach(function(t){t()}),n.unhandlers=[]}var n={events:{getElementDeterminant:function(t){return t.tagName.match(/input|textarea|select/i)?"value":"innerHTML"},getElementEvent:function(t){return t.tagName.match(/input|textarea/i)?"input":"change"}},unhandlers:{}},o=function(){function e(e,n,o){t(e,function(){r(e,n,o)})}return"addEventListener"in W?function(t,n,o,r){r=r||!1,t.addEventListener.apply(t,[n,o,r]),e(t,n,o)}:"attachEvent"in W?function(t,n,o){t.attachEvent.apply(t,["on"+n,o]),e(t,n,o)}:function(){throw new Error("No straight way to bind an event")}}(),r=function(){return"removeEventListener"in W?function(t,e,n){t.removeEventListener(e,n)}:"detachEvent"in W?function(t,e,n){t.detachEvent.apply(t,["on"+e,n])}:function(){throw new Error("No straight way to unbind an event")}}(),i=function(t){return t||(t=W.event,t.cancelBubble=!0,t.returnValue=!1),"stopPropagation"in t&&t.stopPropagation(),t.preventDefault(),!1},s=function(t,e,n){o(t,e,function o(i){n.call(t,i),r(t,e,o)})},a=function(t){t=t||W.event;var e=t.currentTarget||typeof t.target!==TYPES.U?t.target:t.srcElement;if(!e)return!1;for(;3===e.nodeType&&null!==e.parentNode;)e=e.parentNode;return e},c=function(){var t,e,n=[],o=setInterval(function(){if("complete"===document.readyState)for(clearInterval(o),t=0,e=n.length;t<e;t++)n[t].call(this)},10);return function(t){"complete"===document.readyState?t.call(this):n.push(t)}}();NS.makeNs("LIB.events",{on:o,off:r,kill:i,once:s,eventTaget:a,ready:c,unhandle:e})}(),typeof Object.assign!==TYPES.F&&Object.defineProperty(Object,"assign",{value:function(t,e){"use strict";if(null===t||void 0===t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),o=1,r=arguments.length;o<r;o++){var i=arguments[o];if(null!==i&&void 0!==i)for(var s in i)({}).hasOwnProperty.call(i,s)&&(n[s]=i[s])}return n},writable:!0,configurable:!0}),function(){function t(t,e){var n;if(typeof e===TYPES.U)throw new Error("ERR: styles needed");for(n in e)"float"===n?t.style[n.replace(/^float$/i,"cssFloat")]=e[n]:t.style[n]=e[n]}function e(t,e){if(typeof e===TYPES.U)throw new Error("ERR: attrs needed");for(var n in e)u.indexOf(n)<0&&t.setAttribute(n,e[n])}function n(t,e){if(typeof e===TYPES.U)throw new Error("ERR: attrs needed");for(var n in e)u.indexOf(n)<0&&t.removeAttribute(n,e[n])}function o(t,e){if(typeof e===TYPES.U)throw new Error("ERR: data needed");for(var n in e)t.dataset[n]=e[n]}function r(t,e){if(typeof e===TYPES.U)throw new Error("ERR: data needed");for(var n in e)delete t.dataset[n]}function i(t){return t.parentNode&&t.parentNode.removeChild(t)}function s(t){return""+t}function a(t,e){t.appendChild(document.createTextNode(e))}function c(t,e){t.innerHTML=s(e)}var u=["innerHTML","style","dataset","className"];NS.makeNs("LIB.dom",{remove:i,setText:a,setHtml:c,setStyle:t,setAttrs:e,unsetAttrs:n,setData:o,unsetData:r})}(),function(){"use strict";var t=0;NS.makeNs("LIB.timer",{add:function(e){t+=e},get:function(){var e=t+0;return t=0,e}})}(),function(){"use strict";var W=window,xdr=typeof W.XDomainRequest!==TYPES.U&&document.all&&!navigator.userAgent.match(/opera/i),_={getxhr:function(t){var e,n=["Msxml2.XMLHTTP","Msxml3.XMLHTTP","Microsoft.XMLHTTP"],o=n.length,r=0;if(xdr&&t.cors)e=new W.XDomainRequest;else try{e=new W.XMLHttpRequest}catch(t){for(null;r<o;r+=1)try{e=new W.ActiveXObject(n[r])}catch(t){continue}!e&&W.alert("No way to initialize XHR")}return e},setHeaders:function(t,e){var n={xml:"text/xml",html:"text/html",json:"application/json"}[e]||"text/html";t.setRequestHeader("Accept",n+"charset=utf-8")},setMultipartHeader:function(t){t.setRequestHeader("Content-Type","multipart/form-data")},setCookiesHeaders:function(t){var e,n,o;for(e=NS.LIB.cookie.getall(),n=0,o=e.length;n<o;)t.setRequestHeader("Cookie",e[n].name+"="+e[n].value),n++},ajcall:function(t,e){var n,o,r=_.getxhr(e),i=e&&e.method||"POST",s=e&&e.cback,a=e&&e.opened||function(){},c=e&&e.loading||function(){},u=e&&e.error||function(){},l=e&&e.abort||function(){},f=e&&e.sync,h=e&&e.data||{},d=e&&e.type||"text/html",p=!e||void 0===e.cache||e.cache,m="xml"===d?"responseXML":"responseText",g=e&&e.timeout||1e4,y=e&&e.hasFiles,E=!1,S=!1,v=!1,T=!1;if(p||(h.C=+new Date),"GET"===i)h=NS.LIB.object.toQs(h).substr(1);else{n=new W.FormData;for(o in h)h.hasOwnProperty(o)&&n.append(o,h[o]);h=n}if(xdr&&e.cors)r.open(i,"GET"===i?t+(h?"?"+h:""):t),r.onerror=u,r.ontimeout=function(){},r.onprogress=function(t){if(t.lengthComputable){var e=t.loaded/t.total*100;console.log(e+"% uploaded")}},r.onload=function(){s(r.responseText)},r.timeout=3e3,_.setHeaders(r,y,d),o={xml:"text/xml",html:"text/html",json:"application/json"}[d]||"text/html",r.contentType=o,window.setTimeout(function(){r.send()},20);else{r.onreadystatechange=function(){if(T===r.readyState)return!1;if(T=r.readyState,4===parseInt(r.readyState,10)&&0===parseInt(r.status,10))return r.onerror({error:404,xhr:r,url:t}),r.abort(),!1;if("complete"===T||4===parseInt(T,10)&&200===parseInt(r.status,10))return E=!0,404===parseInt(r.status,10)?(r.onerror.call(r),!1):(s&&(S=r[m],function(){s(S)}()),v=r[m],W.setTimeout(function(){r=null},50),v);if(3===T)c(r);else if(2===T)a(r);else if(1===T)switch(y?_.setHeaders(r,"json"):_.setHeaders(r,d),i){case"POST":case"PUT":try{r.send(h||!0)}catch(t){}break;case"DELETE":case"GET":try{r.send(null)}catch(t){}break;default:W.alert(i),r.send(null)}return!0},r.onerror=function(){u&&u.apply(null,arguments)},r.onabort=function(){l&&l.apply(null,arguments)},r.open(i,"GET"===i?t+(h?"?"+h:""):t,f),W.setTimeout(function(){E||(E=!0,r.abort())},g);try{return"responseXML"===m?r[m].childNodes[0]:r[m]}catch(t){}}return!0}};NS.makeNs("LIB.io",{getxhr:_.getxhr,post:function(uri,cback,sync,data,cache,files,err){return _.ajcall(uri,{cback:function(r){files?(r=r.replace(/(?:\/\*(?:[\s\S]*?)\*\/)|(?:([\s;])+\/\/(?:.*)$)/gm,""),cback(window.JSON&&window.JSON.parse?JSON.parse(r):eval(["(",r,")"].join("")))):cback(r)},method:"POST",sync:sync,data:data,cache:cache,error:err,hasFiles:!!files})},get:function(t,e,n,o,r,i){return _.ajcall(t,{cback:e||function(){},method:"GET",sync:n,data:o,cache:r,error:i})},put:function(t,e,n,o,r,i){return _.ajcall(t,{cback:e,method:"PUT",sync:n,data:o,cache:r,error:i})},getJson:function(uri,cback,data,cors){return _.ajcall(uri,{type:"json",method:"GET",sync:!1,cback:function(r){r=r.replace(/(?:\/\*(?:[\s\S]*?)\*\/)|(?:([\s;])+\/\/(?:.*)$)/gm,""),cback(W.JSON&&W.JSON.parse?JSON.parse(r):eval(["(",r,")"].join("")))},data:data,cors:!!cors})},getXML:function(t,e){return _.ajcall(t,{method:"GET",sync:!1,type:"xml",cback:e||function(){}})}})}(),function(){"use strict";function t(t,e){var n,o="";for(n in t)t.hasOwnProperty(n)&&(o+=e(t,n,o));return o}function e(t,e){return n(t)||typeof JSON===_U_?t===e:JSON.stringify(t)===JSON.stringify(e)}function n(t){return"object"==typeof Node?t instanceof W.Node:t&&"object"==typeof t&&"number"==typeof t.nodeType&&"string"==typeof t.nodeName}function o(t,e){var n,o=e||("undefined"!=typeof global?global:"undefined"!=typeof window?window:this);for(n in t)t.hasOwnProperty(n)&&(o[n]=t[n])}NS.makeNs("LIB.object",{extract:o,fromQs:function(){var t,e,n,o=document.location.search.substr(1).split("&"),r=[];for(t=0,e=o.length;t<e;t+=1)n=o[t].split("="),!r[n[0]]&&(r[n[0]]=decodeURIComponent(n[1]));return r},clone:function(t){var e,n,o,r=NS.object;if(null===t||"object"!=typeof t)return t;if(t instanceof Date)return e=new Date,e.setTime(t.getTime()),e;if(t instanceof Array){for(e=[],n=0,o=t.length;n<o;n++)e[n]=r.clone(t[n]);return e}if(t instanceof Object){e={};for(n in t)t.hasOwnProperty(n)&&(e[n]=r.clone(t[n]));return e}throw new Error("Unable to copy obj! Its type isn't supported.")},extend:function(t,e,n){var o,r=NS.object.clone(t);for(o in e)!e.hasOwnProperty(o)||o in r&&!n||(r[o]=e[o]);return r},keyize:function(t,e){var n={},o=0,r=t.length;for(null;o<r;o++)e in t[o]&&!(t[o][e]in n)&&(n[t[o][e]]=t[o]);return n},isString:function(t){return"string"==typeof t||t instanceof String},jCompare:e,toQs:function(e){return t(e,function(t,e,n){return[n?"&":"?",encodeURIComponent(e),"=",encodeURIComponent(t[e])].join("").replace(/'/g,"%27")})}})}(),function(){"use strict";function t(){return W.navigator.cookieEnabled}function e(t,e,n,o,r,i){if(!NS.LIB.cookie.enabled)return!1;this.cookie_nocookiesaround=!1;var s=new Date,a=new Date(s.getTime()+n);return WD.cookie=[t,"=",W.escape(e),n?";expires="+a.toGMTString():"",o?";path="+o:"",r?";domain="+r:"",i?";secure":""].join(),!0}function n(t,e,n){if(!NS.LIB.cookie.enabled)return!1;var o=!1;return this.get(t)&&(WD.cookie=[t,"=",e?";path="+e:"",n?";domain="+n:"",";expires=Thu, 01-Jan-1970 00:00:01 GMT"].join(""),o=!0),o}function o(t){var e=WD.cookie.split(";"),n="",o="",r=!1,i=0,s=e.length;if(!NS.LIB.cookie.enabled)return!1;for(null;i<s;i+=1){if(n=e[i].split("="),n[0].replace(/^\s+|\s+$/g,"")===t)return r=!0,n.length>1&&(o=W.unescape(n[1].replace(/^\s+|\s+$/g,""))),o;n=null,""}return r}function r(){if(!NS.LIB.cookie.enabled)return!1;var t,e=WD.cookie.split(/;/),n=0,o=e.length;for(null;n<o;n+=1)t=e[n].split(/=/),this.del(t[0],!1,!1);return this.cookie_nocookiesaround=!0,!0}function i(){return!!NS.LIB.cookie.enabled&&(""===WD.cookie?[]:this.cookie_nocookiesaround?[]:WD.cookie.split(";").forEach(function(t){var e=t.split("=");return{name:e[0],value:e[1]}}))}NS.makeNs("LIB.cookie",{enabled:!0,cookie_nocookiesaround:!1,initCheck:t,set:e,get:o,del:n,delall:r,getall:i})}(),console.log(NS),Unode.prototype.prepareState=function(){var t="state"in this.config,e=t?this.config.state:{};this.state=typeof e===TYPES.F?e():e},Unode.prototype.initialize=function(){this.rendered=!1,this.setCall("Ref,Events,Text,Html,Style,Attrs,Data,Children,Cbs"),typeof this.config[Unode.identifier]!==TYPES.U&&typeof this.config.map.elements[this.config[Unode.identifier]]===TYPES.U&&this.map.add(this.config[Unode.identifier],this)},Unode.prototype.setCall=function(t){var e=this;t.split(/,/).forEach(function(t){e["set"+t]()})},Unode.prototype.cleanup=function(){this.node.innerHTML="",this.node.parentNode.removeChild(this.node)},Unode.prototype.setChildren=function(){var t=this,e=[];"children"in this.config&&(e=(typeof this.config.children===TYPES.F?this.config.children.call(this):this.config.children).map(function(e){return new Unode(Object.assign({},e,{target:t.node,rootNode:t.rootNode,map:t.map,parentNode:t}),t.map)})),this.toSolve=e.length,this.children=e},Unode.prototype.setMethods=function(){var t,e=this,n=Object.keys(this.config);n.forEach(function(n){(t=n.match(/^method_(\w*)$/i))&&(t[1]in e?console.warn("[WARNING] : method `"+t[0]+" cant be added, would override existing element."):e[t[1]]=e.config[t[0]].bind(e))})},Unode.prototype.setRef=function(t,e){t?(e||this).map[t]=e||this:typeof this.config.ref!==TYPES.U&&(this.map[this.config.ref]=this)},Unode.prototype.setCbs=function(){this.cb="cb"in this.config&&typeof this.config.cb===TYPES.F?this.config.cb.bind(this):this.solve.bind(this)},Unode.prototype.setStyle=function(t){t&&(this.config.style=Object.assign({},this.config.style,t)),this.config.style&&NS.LIB.dom.setStyle(this.node,this.config.style)},Unode.prototype.setAttrs=function(t){t&&(this.config.attrs=Object.assign({},this.config.attrs,t)),this.config.attrs&&NS.LIB.dom.setAttrs(this.node,this.config.attrs)},Unode.prototype.setData=function(t){t&&(this.config.data=Object.assign({},this.config.data,t)),this.config.data&&(this.data=this.config.data,NS.LIB.dom.setData(this.node,this.data))},Unode.prototype.setText=function(t){typeof t!==TYPES.U&&(this.config.text=t),typeof this.config.text!==TYPES.U&&NS.LIB.dom.setText(this.node,this.config.text)},Unode.prototype.setHtml=function(t){typeof t!==TYPES.U&&(this.config.html=t),typeof this.config.html!==TYPES.U&&NS.LIB.dom.setHtml(this.node,this.config.html)},Unode.prototype.killEvent=function(t){NS.LIB.events.kill(t)},Unode.prototype.checkInit=function(t){return"init"in this.config&&typeof this.config.init===TYPES.F&&!this.config.init.call(this)&&this.abort(),this},Unode.prototype.checkEnd=function(t){var e=this;return"end"in this.config&&typeof this.config.end===TYPES.F&&this.map.endFunctions.push(function(){e.config.end.call(e)}),this},Unode.prototype.unhandle=function(t){NS.LIB.events.unhandle(t||this.node)},Unode.prototype.setEvents=function(){var t,e,n,o=this;for(t in o.config)(e=t.match(/^(on(ce)?)([A-Z]{1}[a-z]*)$/))&&(n=e[3].toLowerCase(),function(t){NS.LIB.events[e[1]](o.node,n,function(e){o.config[t].call(o,e)})}(t));return this},Unode.prototype.setState=function(t){for(var e in t)t.hasOwnProperty(e)&&(this.state[e]=t)},Unode.prototype.done=Unode.prototype.solve=function(){var t=[].slice.call(arguments,0);t.length&&this.parentNode.paramsFromChildren.push(t),this.parentNode.toSolve--,this.toSolve<=0&&(this.parent.appendChild(this.node),this.rendered=!0,this.resolve(this))},Unode.prototype.render=function(){var t=this,e=new NS.LIB.Balle(function(e,n){t.resolve=e,t.reject=n});if(this.rendered=!1,this.toSolve>0)this.children.forEach(function(e,n){e.render().then(function(){t.node.appendChild(e.node),0===t.toSolve&&(t.paramsFromChildren.length?t.cb(t.paramsFromChildren):t.cb())})});else{this.rendered=!0;var n=this.cb(t.paramsFromChildren);n&&this.rootNode.paramsFromChildren.push(n)}return e},Unode.prototype.report=function(){var t=JSON.stringify(this.config).length,e=this.node.innerHTML.length;return(e/t).toFixed(2)+" (html:"+e+" / json:"+t+")"},Unode.isUnode=function(t){return t instanceof Unode},Unode.identifier="id";var Engy={};Engy.solve=function(t){return Balle.one(function(e,n){process(t).then(function(t){e(t)})})};var __renders={};return{render:render,renderWithComponents:renderWithComponents,cleanup:cleanup,get:get,preload:preload,getElement:getElement,getElements:getElements}}();